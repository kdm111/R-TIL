## Day6

### 카운트
카운트의 현재값을 가져올 수 있다.

### 연속동작 및 단속동작
연속동작 : 연속모드로 무한 반복
단속동작 : 단일 동작 모드 수행

### PLC 특수기능
SET, RST
(X0 | M0) & !X1 = M0
== X0 = SET M0
== X1 = RST M0

SET을 반드시 한 뒤 RST를 해야 초기화가 가능하다.

BKRST M0 K3(block RST)
M0부터 ~ M1, M2까지 총 3개를 리셋한다.

신호의 펄스화(짧은 신호)
X0 = [+ K1 D0]
D0 +1한다.
전기 신호를 펄스로 바꿔 나타냄
한 스캔당 하나가 올라가게 된다.

상승 펄스는 상승 시의 펄스를 계산
하강 펄스는 하강 시의 펄스를 계산

shift + f7 상승 펄스 : 입력 시 상승
shift + f8 하강 펄스 : 입력제거 시 상승

코일 자리에 M을 펄스하는 방법
PLS : 라이징 엣지, 
PLF : 폴링 엣지 


라인 펄스

art + f5 : 상승 펄스화
ctrl + art + f5 : 하강 펄스화


신호 반전
ctrl + alt + f10
기존까지 신호 반전

플립 플랍
[FF Y30]
교번 출력, alter 회로

PLS X16 = !FF Y31
PLS X16 = FF Y32

래치 릴레이
정전 유지 기능 : 전원 차단 시에도 CPU 배터리에 의해 데이터를 유지
Navigation - Parameter - PLC Parameter - Device

(X0 | L0) & !X1 = L0
L0는 PLC를 리셋 시킨 뒤 다시 RUN을 시켜도 지워지지 않는다.

래치 릴레이의 활용
계속 동작해야 하는 모터
작업자가 수동으로 입력한 값
누적 생산 수량 값
특정 공정이 완료되었는지 여부를 기억해야 할때

비상정지 상태를 기억하는 메모리 (PLC를 재시작해도 비상상태 유지)
유지보수 및 점검모드 메모리(이 때 PLC 리셋이 여러번 이루어지기 때문)

특수 릴레이
특수한 기능을 부여한 내부 비트 메모리
sm400 : 항상 on
sm401 : 항상 off
sm402 : run후 1스캔 on
sm403 : run후 1스캔만 off



sm412 : 1초 클록 켜고 끄는 시간 모두 포함. 0.5초 on 0.5초 off

JUMP : [CJ P1]
점프를 하게 되면 점프가 되기 전까지 모든 생략이 된다.
M10000 = [CJ P1]

P1 



데이터 레지스터 (D)
10진수를 저장하는 word divice
D0 = 1 Word 2^16 비트 표현 가능 0~32767(-32768 ~ 32767)
32768이상의 자연수는 사용불가

MOV K32768 D0 -> over the range


큰 값이 필요한 경우 double word를 사용한다.
0 ~ 2147483647
D0 + D1를 명령어로 판단하게 된다.

데이터 이동 명령 (매뉴얼 218)
MOV(P) S D
P : rising pulse, 펄스(ex 한번만 실행할 때 )
S : source(ex 10진수(K1), 16진수(HA), 데이터 레지스터(D))
D : Destination(ex 데이터 레지스터(D), 출력 (K4Y10), 내부 (K4M10))
계속 실행한다.

DMOV (P) S D : double word로 전송 명령어
32비트 데이터 전송
DMOV S D3
이 경우 D의 범위를 초과해서 사용하기 때문에
D3, D4를 함께 사용한다. 따라서 D4는 사용되어서는 안된다.

PLC 데이터 명령
online > monitor > device/buffer memory batch -> D0
각 디바이스의 실제 메모리 를 보는 곳



사칙연산
[+ K10 K20 D0] == 30
[- K20 K10 D1] == 10

연산범위 -32768, 32767

pulse + [+ K10 D0 D1] = D1 = D0 + 10
[+P K10 D1] = D1 += 10

INC(P) 1씩 증가
[INC(P) D0]
DEC(P) 1씩 감소

곱셈은 기본적으로 더블 워드로 설정된다.
[* K100 K10000 D0]
dmov로 사용되므로 유의

나눗셈은 몫은 비트 나머지는 해당 비트의 + 1
[/ K20 K7 D3] : 


대소 비교
[> D0 K1]
[<= D0 K5]
[= D0 K3]
[<> D0 K4]

조건이 맞으면 신호를 넘기게 된다.

